% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/predict_rbm.R
\name{ReconstructRBM}
\alias{ReconstructRBM}
\title{Reconstruct Visible Layer from Hidden Layers (Multi-Layer RBM Backward Pass)}
\usage{
ReconstructRBM(object, hidden = NULL)
}
\arguments{
\item{object}{An RBM object fitted using FitRBM().}

\item{hidden}{A list of matrices (one per hidden layer) or NULL. If NULL, uses the 
encoded metadata from the training data (default: NULL). If provided, must be a 
named list with names matching object$hidden_factors.}
}
\value{
A matrix of reconstructed visible layer values (expression) with
  observations as rows and features as columns.
}
\description{
Given hidden layer activations from multiple layers, reconstruct the visible layer 
(expression values) using the RBM weights. This is useful for understanding what 
patterns of expression are associated with specific metadata factors.
}
\details{
Reconstruction uses the multi-layer RBM backward pass:
\deqn{v_{reconstructed} = \sum_{layers} W_layer \%*\% h_layer + b_v}
where h_layer is each hidden layer, W_layer is the corresponding weight matrix, 
and b_v is the visible bias.
}
\examples{
\dontrun{
# Fit RBM
rbm <- FitRBM(pbmc, hiddenFactors = c("CellType", "Treatment"), family = "zinb")

# Reconstruct expression from training metadata
reconstructed <- ReconstructRBM(rbm)

# Reconstruct from specific hidden values
hidden_vals <- list(
  CellType = matrix(c(1, 0, 1), ncol = 3),  # 3 cell type categories
  Treatment = matrix(c(0, 1), ncol = 1)     # Binary treatment
)
reconstructed <- ReconstructRBM(rbm, hidden = hidden_vals)
}
}
